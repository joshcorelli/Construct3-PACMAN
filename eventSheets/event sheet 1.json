{
	"name": "Event sheet 1",
	"events": [
		{
			"eventType": "variable",
			"name": "timer",
			"type": "number",
			"initialValue": "120",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 869800721012965
		},
		{
			"eventType": "comment",
			"text": "Control the Player with the keyboard arrows to move it and try to eat all the dots and big dots on the board.\nDon't collide with the ghosts unless they are vulnerable.\n\nThe Game object contains all the \"global\" variables.\n\nThe Player and Ghosts use the Bullet behavior to move.\nThey move for moveDuration and the Bullet speed is set back to 0 when done."
		},
		{
			"eventType": "comment",
			"text": "Player input & movement"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-speed",
					"objectClass": "Player",
					"sid": 398943295737841,
					"behaviorType": "Bullet",
					"parameters": {
						"comparison": 0,
						"speed": "0"
					}
				}
			],
			"actions": [],
			"sid": 999431673803423,
			"children": [
				{
					"eventType": "comment",
					"text": "When an arrow is pressed, check if the next tile in the direction does not contain a wall. Set the direction accordingly."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 602437233757883,
							"parameters": {
								"key": 39
							}
						},
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Player",
							"sid": 251117340157699,
							"parameters": {
								"object": "wall",
								"offset-x": "Game.TileSize/2",
								"offset-y": "0"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 947934826862076,
							"parameters": {
								"instance-variable": "direction",
								"value": "0"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 594713212490366,
							"parameters": {
								"instance-variable": "dirChange",
								"value": "true"
							}
						}
					],
					"sid": 269837033549084
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 699251992987846,
							"parameters": {
								"key": 40
							}
						},
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Player",
							"sid": 652578117222872,
							"parameters": {
								"object": "wall",
								"offset-x": "0",
								"offset-y": "Game.TileSize/2"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 727182763893252,
							"parameters": {
								"instance-variable": "direction",
								"value": "90"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 103169014610416,
							"parameters": {
								"instance-variable": "dirChange",
								"value": "true"
							}
						}
					],
					"sid": 867098442197152
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 569438566913732,
							"parameters": {
								"key": 37
							}
						},
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Player",
							"sid": 416359581551139,
							"parameters": {
								"object": "wall",
								"offset-x": "-1 * (Game.TileSize/2)",
								"offset-y": "0"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 167799723942721,
							"parameters": {
								"instance-variable": "direction",
								"value": "180"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 179831930934593,
							"parameters": {
								"instance-variable": "dirChange",
								"value": "true"
							}
						}
					],
					"sid": 846697153272002
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 748488652895209,
							"parameters": {
								"key": 38
							}
						},
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Player",
							"sid": 664563105820422,
							"parameters": {
								"object": "wall",
								"offset-x": "0",
								"offset-y": "-1 * (Game.TileSize/2)"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 537285267287149,
							"parameters": {
								"instance-variable": "direction",
								"value": "270"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 563233881384323,
							"parameters": {
								"instance-variable": "dirChange",
								"value": "true"
							}
						}
					],
					"sid": 188384930559716
				},
				{
					"eventType": "comment",
					"text": "The direction has changed, set the Player to move in the direction."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 654351459216083,
							"parameters": {
								"instance-variable": "dirChange"
							}
						}
					],
					"actions": [
						{
							"id": "set-speed",
							"objectClass": "Player",
							"sid": 934719389874116,
							"behaviorType": "Bullet",
							"parameters": {
								"speed": "Game.TileSize / Player.moveDuration"
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "Player",
							"sid": 962255371928568,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "Player.direction"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 676680893122384,
							"parameters": {
								"seconds": "Player.moveDuration"
							}
						},
						{
							"id": "set-speed",
							"objectClass": "Player",
							"sid": 694674434114164,
							"behaviorType": "Bullet",
							"parameters": {
								"speed": "0"
							}
						},
						{
							"id": "set-position",
							"objectClass": "Player",
							"sid": 677287044188081,
							"parameters": {
								"x": "int(Player.X / Game.TileSize) *  Game.TileSize + (Game.TileSize/2)",
								"y": "int(Player.Y / Game.TileSize) *  Game.TileSize + (Game.TileSize/2)"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 533722099440947,
							"parameters": {
								"instance-variable": "dirChange",
								"value": "false"
							}
						}
					],
					"sid": 249698120671951
				},
				{
					"eventType": "comment",
					"text": "Player transitions to the opposite side of the map"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 703057877422456,
							"parameters": {
								"object": "Transition1"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Player",
							"sid": 652856540393595,
							"parameters": {
								"x": "792",
								"y": "456"
							}
						}
					],
					"sid": 294712196715229
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 335524781853472,
							"parameters": {
								"object": "Transition2"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Player",
							"sid": 683703071806403,
							"parameters": {
								"x": "24",
								"y": "456"
							}
						}
					],
					"sid": 997441275559736
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Ghost movement"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 407856672237865,
					"parameters": {
						"object": "Ghost"
					}
				},
				{
					"id": "compare-speed",
					"objectClass": "Ghost",
					"sid": 578751093768103,
					"behaviorType": "Bullet",
					"parameters": {
						"comparison": 0,
						"speed": "0"
					}
				}
			],
			"actions": [
				{
					"id": "move-to-top",
					"objectClass": "Ghost",
					"sid": 464490040755883
				},
				{
					"id": "set-size",
					"objectClass": "aDir",
					"sid": 610975425834080,
					"parameters": {
						"width": "0",
						"height": "1",
						"depth": "1"
					}
				}
			],
			"sid": 727202869395526,
			"children": [
				{
					"eventType": "comment",
					"text": "If a eaten Ghost is back to the house, it \"comes back alive\""
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Ghost",
							"sid": 739015058930156,
							"parameters": {
								"object": "ghostSpawn"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Ghost",
							"sid": 497144781113498,
							"parameters": {
								"instance-variable": "eaten"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "Ghost",
							"sid": 834492020031785,
							"parameters": {
								"instance-variable": "eaten",
								"value": "false"
							}
						}
					],
					"sid": 662232305513113
				},
				{
					"eventType": "comment",
					"text": "Checks what are the Ghost's available direction around it"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Ghost",
							"sid": 898971433279289,
							"parameters": {
								"object": "wall",
								"offset-x": "Game.TileSize/2",
								"offset-y": "0"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "push",
							"objectClass": "aDir",
							"sid": 591946199511856,
							"parameters": {
								"where": "front",
								"value": "0",
								"axis": "x"
							}
						}
					],
					"sid": 627143048089826
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Ghost",
							"sid": 323301484846441,
							"parameters": {
								"object": "wall",
								"offset-x": "0",
								"offset-y": "Game.TileSize/2"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "push",
							"objectClass": "aDir",
							"sid": 237098510471202,
							"parameters": {
								"where": "front",
								"value": "90",
								"axis": "x"
							}
						}
					],
					"sid": 713083479399355
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Ghost",
							"sid": 899602547740328,
							"parameters": {
								"object": "wall",
								"offset-x": "-1 * (Game.TileSize/2)",
								"offset-y": "0"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "push",
							"objectClass": "aDir",
							"sid": 243603192485531,
							"parameters": {
								"where": "front",
								"value": "180",
								"axis": "x"
							}
						}
					],
					"sid": 449780499106242
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Ghost",
							"sid": 357473244424209,
							"parameters": {
								"object": "wall",
								"offset-x": "0",
								"offset-y": "-1 * (Game.TileSize/2)"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "push",
							"objectClass": "aDir",
							"sid": 816801899809676,
							"parameters": {
								"where": "front",
								"value": "270",
								"axis": "x"
							}
						}
					],
					"sid": 463813878202992
				},
				{
					"eventType": "comment",
					"text": "If there are multiple directions available, remove the opposite direction from its current direction to prevent irrelevant back and forth."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-size",
							"objectClass": "aDir",
							"sid": 496206439659972,
							"parameters": {
								"axis": "x",
								"comparison": 4,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "delete",
							"objectClass": "aDir",
							"sid": 226830420280045,
							"parameters": {
								"index": "aDir.IndexOf((Ghost.direction + 180)%360)",
								"axis": "x"
							}
						}
					],
					"sid": 607186521972447
				},
				{
					"eventType": "comment",
					"text": "If the ghost is eaten, set specific directions and movement..."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Ghost",
							"sid": 983780565596892,
							"parameters": {
								"instance-variable": "eaten"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Ghost",
							"sid": 326344073695839,
							"parameters": {
								"animation": "\"Eaten\"",
								"from": "beginning"
							}
						}
					],
					"sid": 606370012367355,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "Ghost",
									"sid": 615309952714615,
									"parameters": {
										"comparison": 2,
										"x-co-ordinate": "ghostSpawn.X"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Ghost",
									"sid": 538747358147526,
									"parameters": {
										"instance-variable": "direction",
										"value": "0"
									}
								}
							],
							"sid": 526451396033366
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "Ghost",
									"sid": 406633585507700,
									"parameters": {
										"comparison": 4,
										"x-co-ordinate": "ghostSpawn.X"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Ghost",
									"sid": 830494450206292,
									"parameters": {
										"instance-variable": "direction",
										"value": "180"
									}
								}
							],
							"sid": 956239631298554
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-y",
									"objectClass": "Ghost",
									"sid": 167880968571364,
									"parameters": {
										"comparison": 2,
										"y-co-ordinate": "ghostSpawn.Y"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Ghost",
									"sid": 272012578721326,
									"parameters": {
										"instance-variable": "direction",
										"value": "90"
									}
								}
							],
							"sid": 518273641089059
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-y",
									"objectClass": "Ghost",
									"sid": 733223559626655,
									"parameters": {
										"comparison": 4,
										"y-co-ordinate": "ghostSpawn.Y"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Ghost",
									"sid": 876778226040311,
									"parameters": {
										"instance-variable": "direction",
										"value": "270"
									}
								}
							],
							"sid": 281039948386079
						}
					]
				},
				{
					"eventType": "comment",
					"text": "... otherwise, set a random direction amongst the available directions"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 667151055359386
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Ghost",
							"sid": 651354201261737,
							"parameters": {
								"instance-variable": "direction",
								"value": "aDir.At(floor(random(aDir.Width)))"
							}
						}
					],
					"sid": 138268553135687,
					"children": [
						{
							"eventType": "comment",
							"text": "If the ghost is vulnerable (trying to escape the Player)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Ghost",
									"sid": 782213410883484,
									"parameters": {
										"instance-variable": "escape"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Ghost",
									"sid": 558416947239140,
									"parameters": {
										"instance-variable": "moveDuration",
										"value": "0.5"
									}
								}
							],
							"sid": 387716796385858,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-y",
											"objectClass": "Ghost",
											"sid": 467716579659844,
											"parameters": {
												"comparison": 4,
												"y-co-ordinate": "Player.Y"
											}
										},
										{
											"id": "contains-value",
											"objectClass": "aDir",
											"sid": 769876421757287,
											"parameters": {
												"value": "90"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Ghost",
											"sid": 355023433355114,
											"parameters": {
												"instance-variable": "direction",
												"value": "90"
											}
										}
									],
									"sid": 469098361370641
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-y",
											"objectClass": "Ghost",
											"sid": 701528749490995,
											"parameters": {
												"comparison": 2,
												"y-co-ordinate": "Player.Y"
											}
										},
										{
											"id": "contains-value",
											"objectClass": "aDir",
											"sid": 448887304056259,
											"parameters": {
												"value": "270"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Ghost",
											"sid": 169294361023538,
											"parameters": {
												"instance-variable": "direction",
												"value": "270"
											}
										}
									],
									"sid": 837141932548898
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-x",
											"objectClass": "Ghost",
											"sid": 368909763674436,
											"parameters": {
												"comparison": 4,
												"x-co-ordinate": "Player.X"
											}
										},
										{
											"id": "contains-value",
											"objectClass": "aDir",
											"sid": 179630482914173,
											"parameters": {
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Ghost",
											"sid": 491565728835671,
											"parameters": {
												"instance-variable": "direction",
												"value": "0"
											}
										}
									],
									"sid": 227564114372713
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-x",
											"objectClass": "Ghost",
											"sid": 945121197130468,
											"parameters": {
												"comparison": 2,
												"x-co-ordinate": "Player.X"
											}
										},
										{
											"id": "contains-value",
											"objectClass": "aDir",
											"sid": 267687397629079,
											"parameters": {
												"value": "180"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Ghost",
											"sid": 774144026632091,
											"parameters": {
												"instance-variable": "direction",
												"value": "180"
											}
										}
									],
									"sid": 827194142107167
								},
								{
									"eventType": "comment",
									"text": "Set the animation according to if the Ghost is blinking or not"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Ghost",
											"sid": 864559968168817,
											"parameters": {
												"instance-variable": "escapeBlink"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Ghost",
											"sid": 598517072837569,
											"parameters": {
												"animation": "\"Escape_\" & Self.direction",
												"from": "beginning"
											}
										}
									],
									"sid": 721179670562728
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 425514981951673
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Ghost",
											"sid": 851504990773181,
											"parameters": {
												"animation": "\"EscapeBlink_\" & Self.direction",
												"from": "beginning"
											}
										}
									],
									"sid": 327798320406237
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Otherwise the Ghost will have a set movement according to its \"behavior\" (boolean variables hor and vert)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 797615657904878
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Ghost",
									"sid": 183011559305466,
									"parameters": {
										"animation": "Self.name & \"_\" & Self.direction",
										"from": "beginning"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Ghost",
									"sid": 470221197132405,
									"parameters": {
										"instance-variable": "moveDuration",
										"value": "0.33"
									}
								}
							],
							"sid": 555772084103889,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Ghost",
											"sid": 958313199680491,
											"parameters": {
												"instance-variable": "hor"
											}
										}
									],
									"actions": [],
									"sid": 601959014893681,
									"children": [
										{
											"eventType": "comment",
											"text": "The priority is to the horizontal movement, the checks about the current X position are last, likely to go in a horizontal direction if available"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-y",
													"objectClass": "Ghost",
													"sid": 827164428441256,
													"parameters": {
														"comparison": 4,
														"y-co-ordinate": "Player.Y"
													}
												},
												{
													"id": "contains-value",
													"objectClass": "aDir",
													"sid": 637298158775893,
													"parameters": {
														"value": "270"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Ghost",
													"sid": 707179892267901,
													"parameters": {
														"instance-variable": "direction",
														"value": "270"
													}
												}
											],
											"sid": 499477787092177
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-y",
													"objectClass": "Ghost",
													"sid": 974652780042972,
													"parameters": {
														"comparison": 2,
														"y-co-ordinate": "Player.Y"
													}
												},
												{
													"id": "contains-value",
													"objectClass": "aDir",
													"sid": 288453919077919,
													"parameters": {
														"value": "90"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Ghost",
													"sid": 636995717781262,
													"parameters": {
														"instance-variable": "direction",
														"value": "90"
													}
												}
											],
											"sid": 816100991701587
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-x",
													"objectClass": "Ghost",
													"sid": 793988045345054,
													"parameters": {
														"comparison": 4,
														"x-co-ordinate": "Player.X"
													}
												},
												{
													"id": "contains-value",
													"objectClass": "aDir",
													"sid": 895677532199237,
													"parameters": {
														"value": "180"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Ghost",
													"sid": 774124622632409,
													"parameters": {
														"instance-variable": "direction",
														"value": "180"
													}
												}
											],
											"sid": 835756483754075
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-x",
													"objectClass": "Ghost",
													"sid": 644158961030839,
													"parameters": {
														"comparison": 2,
														"x-co-ordinate": "Player.X"
													}
												},
												{
													"id": "contains-value",
													"objectClass": "aDir",
													"sid": 482314186049775,
													"parameters": {
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Ghost",
													"sid": 542839692657994,
													"parameters": {
														"instance-variable": "direction",
														"value": "0"
													}
												}
											],
											"sid": 106313489444786
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Ghost",
											"sid": 669059349647548,
											"parameters": {
												"instance-variable": "vert"
											}
										}
									],
									"actions": [],
									"sid": 512043739708660,
									"children": [
										{
											"eventType": "comment",
											"text": "The priority is to the vertical movement, the checks about the current Y position are last, likely to go in a vertical direction if available"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-x",
													"objectClass": "Ghost",
													"sid": 173551211758419,
													"parameters": {
														"comparison": 4,
														"x-co-ordinate": "Player.X"
													}
												},
												{
													"id": "contains-value",
													"objectClass": "aDir",
													"sid": 739696398799110,
													"parameters": {
														"value": "180"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Ghost",
													"sid": 233109848369371,
													"parameters": {
														"instance-variable": "direction",
														"value": "180"
													}
												}
											],
											"sid": 407194090924082
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-x",
													"objectClass": "Ghost",
													"sid": 618776757756004,
													"parameters": {
														"comparison": 2,
														"x-co-ordinate": "Player.X"
													}
												},
												{
													"id": "contains-value",
													"objectClass": "aDir",
													"sid": 626583129386632,
													"parameters": {
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Ghost",
													"sid": 670576134492983,
													"parameters": {
														"instance-variable": "direction",
														"value": "0"
													}
												}
											],
											"sid": 832776657461946
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-y",
													"objectClass": "Ghost",
													"sid": 634817346525539,
													"parameters": {
														"comparison": 4,
														"y-co-ordinate": "Player.Y"
													}
												},
												{
													"id": "contains-value",
													"objectClass": "aDir",
													"sid": 518540305733238,
													"parameters": {
														"value": "270"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Ghost",
													"sid": 987557176991382,
													"parameters": {
														"instance-variable": "direction",
														"value": "270"
													}
												}
											],
											"sid": 237459437579122
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-y",
													"objectClass": "Ghost",
													"sid": 575007169577706,
													"parameters": {
														"comparison": 2,
														"y-co-ordinate": "Player.Y"
													}
												},
												{
													"id": "contains-value",
													"objectClass": "aDir",
													"sid": 975802623300648,
													"parameters": {
														"value": "90"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Ghost",
													"sid": 637094107956976,
													"parameters": {
														"instance-variable": "direction",
														"value": "90"
													}
												}
											],
											"sid": 992455871839500
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "The speed, angle of motion (the angle of motion needs to be set once a speed superior to 0 is set) and the duration of the movement are set; the Ghost will be moving"
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-speed",
							"objectClass": "Ghost",
							"sid": 279501079643053,
							"behaviorType": "Bullet",
							"parameters": {
								"speed": "Game.TileSize / Ghost.moveDuration"
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "Ghost",
							"sid": 604669104109103,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "Ghost.direction"
							}
						},
						{
							"id": "start-timer",
							"objectClass": "Ghost",
							"sid": 439038406139343,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "Ghost.moveDuration",
								"type": "once",
								"tag": "\"stop\""
							}
						}
					],
					"sid": 841220779157837
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Ghost",
							"sid": 876688637355130,
							"parameters": {
								"object": "GhostTransition1"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Ghost",
							"sid": 415305686446134,
							"parameters": {
								"x": "780",
								"y": "456"
							}
						}
					],
					"sid": 995970783825899
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Ghost",
							"sid": 841751189413784,
							"parameters": {
								"object": "GhostTransition2"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Ghost",
							"sid": 174866146557187,
							"parameters": {
								"x": "24",
								"y": "456"
							}
						}
					],
					"sid": 635882087444724
				}
			]
		},
		{
			"eventType": "comment",
			"text": "The Ghost movement duration has been completed, the Bullet speed is set to 0 and the position is set so the Ghost is properly aligned in the board"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-timer",
					"objectClass": "Ghost",
					"sid": 487889883149508,
					"behaviorType": "Timer",
					"parameters": {
						"tag": "\"stop\""
					}
				}
			],
			"actions": [
				{
					"id": "set-speed",
					"objectClass": "Ghost",
					"sid": 648559834801783,
					"behaviorType": "Bullet",
					"parameters": {
						"speed": "0"
					}
				},
				{
					"id": "set-position",
					"objectClass": "Ghost",
					"sid": 230434709778530,
					"parameters": {
						"x": "int(Ghost.X / Game.TileSize) *  Game.TileSize + (Game.TileSize/2)",
						"y": "int(Ghost.Y / Game.TileSize) *  Game.TileSize + (Game.TileSize/2)"
					}
				}
			],
			"sid": 642048442818913
		},
		{
			"eventType": "comment",
			"text": "The Ghost \"escape\" (vulnerability) period will end, we make it blink"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-timer",
					"objectClass": "Ghost",
					"sid": 790938018721913,
					"behaviorType": "Timer",
					"parameters": {
						"tag": "\"escape\""
					}
				},
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 492715043215638,
					"parameters": {
						"object": "Ghost"
					}
				}
			],
			"actions": [
				{
					"id": "set-boolean-instvar",
					"objectClass": "Ghost",
					"sid": 669600926199281,
					"parameters": {
						"instance-variable": "escapeBlink",
						"value": "true"
					}
				},
				{
					"id": "start-timer",
					"objectClass": "Ghost",
					"sid": 616728492379842,
					"behaviorType": "Timer",
					"parameters": {
						"duration": "Game.ghostBlinkTime",
						"type": "once",
						"tag": "\"endEscape\""
					}
				}
			],
			"sid": 461761120296839
		},
		{
			"eventType": "comment",
			"text": "The Ghost \"escape\" (vulnerability) period will end, it has finished blinking. We reset the boolean variables accordingly and reset \"nbGhost\" (the score multiplier for ghosts eaten during this period)"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-timer",
					"objectClass": "Ghost",
					"sid": 462514008112155,
					"behaviorType": "Timer",
					"parameters": {
						"tag": "\"endEscape\""
					}
				},
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 471210972524398,
					"parameters": {
						"object": "Ghost"
					}
				}
			],
			"actions": [
				{
					"id": "set-boolean-instvar",
					"objectClass": "Ghost",
					"sid": 218606699025883,
					"parameters": {
						"instance-variable": "escape",
						"value": "false"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "Ghost",
					"sid": 976629991057994,
					"parameters": {
						"instance-variable": "escapeBlink",
						"value": "false"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Game",
					"sid": 320009892835600,
					"parameters": {
						"instance-variable": "nbGhost",
						"value": "0"
					}
				}
			],
			"sid": 377895393495122
		},
		{
			"eventType": "comment",
			"text": "Player's collisions"
		},
		{
			"eventType": "comment",
			"text": "The Player eats a BigDot, we set all Ghosts to be vulnerable, add some score"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Player",
					"sid": 310678795367152,
					"parameters": {
						"object": "BigDot"
					}
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "BigDot",
					"sid": 479888014720915
				},
				{
					"id": "stop-timer",
					"objectClass": "Ghost",
					"sid": 958543554135908,
					"behaviorType": "Timer",
					"parameters": {
						"tag": "\"escape\""
					}
				},
				{
					"id": "stop-timer",
					"objectClass": "Ghost",
					"sid": 827339331933675,
					"behaviorType": "Timer",
					"parameters": {
						"tag": "\"endEscape\""
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "Ghost",
					"sid": 464733197042630,
					"parameters": {
						"instance-variable": "escapeBlink",
						"value": "false"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "Ghost",
					"sid": 723600238303907,
					"parameters": {
						"instance-variable": "escape",
						"value": "true"
					}
				},
				{
					"id": "start-timer",
					"objectClass": "Ghost",
					"sid": 317005887976066,
					"behaviorType": "Timer",
					"parameters": {
						"duration": "Game.ghostEscapeTime",
						"type": "once",
						"tag": "\"escape\""
					}
				},
				{
					"id": "spawn-another-object",
					"objectClass": "BigDot",
					"sid": 825722738895467,
					"parameters": {
						"object": "txtScore",
						"layer": "0",
						"image-point": "0",
						"create-hierarchy": false
					}
				},
				{
					"id": "set-text",
					"objectClass": "txtScore",
					"sid": 275380953969178,
					"parameters": {
						"text": "Game.bigDotScore"
					}
				},
				{
					"id": "set-angle-of-motion",
					"objectClass": "txtScore",
					"sid": 660618052981870,
					"behaviorType": "Bullet",
					"parameters": {
						"angle": "270"
					}
				},
				{
					"id": "add-to-instvar",
					"objectClass": "Game",
					"sid": 723341749228131,
					"parameters": {
						"instance-variable": "Score",
						"value": "Game.bigDotScore"
					}
				},
				{
					"id": "set-text",
					"objectClass": "Text",
					"sid": 939555991842020,
					"parameters": {
						"text": "\"Score : \" & Game.Score"
					}
				}
			],
			"sid": 955631826342102
		},
		{
			"eventType": "comment",
			"text": "The Player eats a Dot, add some score"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Player",
					"sid": 902578767492412,
					"parameters": {
						"object": "Dot"
					}
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "Dot",
					"sid": 596050255497900
				},
				{
					"id": "add-to-instvar",
					"objectClass": "Game",
					"sid": 261377558600402,
					"parameters": {
						"instance-variable": "Score",
						"value": "Game.dotScore"
					}
				},
				{
					"id": "set-text",
					"objectClass": "Text",
					"sid": 231168922315435,
					"parameters": {
						"text": "\"Score : \" & Game.Score"
					}
				}
			],
			"sid": 317211710738472
		},
		{
			"eventType": "comment",
			"text": "The Player collides with a Ghost. \"For each Ghost\" is there to help preventing two overlapping ghosts from removing multiple lives "
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Player",
					"sid": 145976806675805,
					"parameters": {
						"object": "Ghost"
					}
				},
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 548988537139486,
					"parameters": {
						"object": "Ghost"
					}
				}
			],
			"actions": [],
			"sid": 643842433854489,
			"children": [
				{
					"eventType": "comment",
					"text": "The Ghost is vulnerable, we set it to the status \"Eaten\" and add some score points, according to the current multiplier"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Ghost",
							"sid": 873217278807768,
							"parameters": {
								"instance-variable": "escape"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "Ghost",
							"sid": 672795931804825,
							"parameters": {
								"instance-variable": "eaten",
								"value": "true"
							}
						},
						{
							"id": "stop-timer",
							"objectClass": "Ghost",
							"sid": 261028285476632,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"escape\""
							}
						},
						{
							"id": "stop-timer",
							"objectClass": "Ghost",
							"sid": 596635995583429,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"endEscape\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Ghost",
							"sid": 700448781837235,
							"parameters": {
								"instance-variable": "escape",
								"value": "false"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Ghost",
							"sid": 255855998546308,
							"parameters": {
								"instance-variable": "escapeBlink",
								"value": "false"
							}
						},
						{
							"id": "add-to-instvar",
							"objectClass": "Game",
							"sid": 728399474990993,
							"parameters": {
								"instance-variable": "nbGhost",
								"value": "1"
							}
						},
						{
							"id": "spawn-another-object",
							"objectClass": "Ghost",
							"sid": 352132823752556,
							"parameters": {
								"object": "txtScore",
								"layer": "0",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-text",
							"objectClass": "txtScore",
							"sid": 252089730534950,
							"parameters": {
								"text": "100 * Game.nbGhost"
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "txtScore",
							"sid": 606290879439740,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "270"
							}
						},
						{
							"id": "add-to-instvar",
							"objectClass": "Game",
							"sid": 404364924113103,
							"parameters": {
								"instance-variable": "Score",
								"value": "100 * Game.nbGhost"
							}
						},
						{
							"id": "set-text",
							"objectClass": "Text",
							"sid": 643474049993002,
							"parameters": {
								"text": "\"Score : \" & Game.Score"
							}
						}
					],
					"sid": 208496066125202
				},
				{
					"eventType": "comment",
					"text": "The Ghost is not vulnerable\nWe pick all Ghosts in order to be able to put them back to ghostSpawn (otherwise only the colliding Ghost would be moved)\nWe remove 1 life and after Game.playerRespawnTime put back the player into play"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 325860576877346
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Game",
							"sid": 443368279673022,
							"parameters": {
								"instance-variable": "Alive"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Ghost",
							"sid": 118217980755415,
							"parameters": {
								"instance-variable": "eaten"
							},
							"isInverted": true
						},
						{
							"id": "pick-all",
							"objectClass": "System",
							"sid": 982491248333581,
							"parameters": {
								"object": "Ghost"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "playerLives",
							"sid": 610007130314563,
							"parameters": {
								"instance-variable": "ID",
								"comparison": 0,
								"value": "Game.Lives"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Game",
							"sid": 225634978629146,
							"parameters": {
								"instance-variable": "Lives",
								"comparison": 5,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "Game",
							"sid": 234401102398959,
							"parameters": {
								"instance-variable": "Alive",
								"value": "false"
							}
						},
						{
							"id": "destroy",
							"objectClass": "Player",
							"sid": 945050407620728
						},
						{
							"id": "stop-timer",
							"objectClass": "Ghost",
							"sid": 715924535037927,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"escape\""
							}
						},
						{
							"id": "stop-timer",
							"objectClass": "Ghost",
							"sid": 799209027819379,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"endEscape\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Ghost",
							"sid": 281682618368668,
							"parameters": {
								"instance-variable": "escape",
								"value": "false"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Ghost",
							"sid": 377026734502560,
							"parameters": {
								"instance-variable": "escapeBlink",
								"value": "false"
							}
						},
						{
							"id": "destroy",
							"objectClass": "playerLives",
							"sid": 839362175108702
						},
						{
							"id": "subtract-from-instvar",
							"objectClass": "Game",
							"sid": 773594054042055,
							"parameters": {
								"instance-variable": "Lives",
								"value": "1"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 419718218771523,
							"parameters": {
								"seconds": "Game.playerRespawnTime"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Game",
							"sid": 435067483818893,
							"parameters": {
								"instance-variable": "Alive",
								"value": "true"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 992004200429057,
							"parameters": {
								"object-to-create": "Player",
								"layer": "0",
								"x": "playerSpawn.X",
								"y": "playerSpawn.Y",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "Ghost",
							"sid": 610308389029188,
							"parameters": {
								"object": "ghostSpawn",
								"image-point-optional": "0"
							}
						},
						{
							"id": "set-speed",
							"objectClass": "Ghost",
							"sid": 285098083338401,
							"behaviorType": "Bullet",
							"parameters": {
								"speed": "0"
							}
						}
					],
					"sid": 420152230340894
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Game victory condition\nAll the big dots and dots have been eaten. We remove the Ghosts and notify the player"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-two-values",
					"objectClass": "System",
					"sid": 278090956297028,
					"parameters": {
						"first-value": "BigDot.Count",
						"comparison": 0,
						"second-value": "0"
					}
				},
				{
					"id": "compare-two-values",
					"objectClass": "System",
					"sid": 929366850432635,
					"parameters": {
						"first-value": "Dot.Count",
						"comparison": 0,
						"second-value": "0"
					}
				},
				{
					"id": "trigger-once-while-true",
					"objectClass": "System",
					"sid": 419977219772112
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "Ghost",
					"sid": 959725313309462
				},
				{
					"id": "set-visible",
					"objectClass": "txtGUI",
					"sid": 705071008999751,
					"parameters": {
						"visibility": "visible"
					}
				},
				{
					"id": "set-text",
					"objectClass": "txtGUI",
					"sid": 936616273303586,
					"parameters": {
						"text": "\"Congratulations\""
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 309393688529611,
					"parameters": {
						"variable": "timer",
						"value": "0"
					}
				}
			],
			"sid": 245863928163473
		},
		{
			"eventType": "comment",
			"text": "Game defeat condition\nThe player lost all its lives, we delete the Player and notify"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "Game",
					"sid": 295648193403228,
					"parameters": {
						"instance-variable": "Lives",
						"comparison": 3,
						"value": "0"
					}
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "Player",
					"sid": 622832624921945
				},
				{
					"id": "set-visible",
					"objectClass": "txtGUI",
					"sid": 178518591015214,
					"parameters": {
						"visibility": "visible"
					}
				},
				{
					"id": "set-text",
					"objectClass": "txtGUI",
					"sid": 111896011239611,
					"parameters": {
						"text": "\"Game Over\""
					}
				}
			],
			"sid": 597825143285581
		},
		{
			"eventType": "comment",
			"text": "Timer"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 276936698238596
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "text_time",
					"sid": 631556547336286,
					"parameters": {
						"text": "\"Time: \" & timer"
					}
				}
			],
			"sid": 904903916898828
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 945975010669206,
					"parameters": {
						"interval-seconds": "1.0"
					}
				}
			],
			"actions": [
				{
					"id": "subtract-from-eventvar",
					"objectClass": "System",
					"sid": 946639888034643,
					"parameters": {
						"variable": "timer",
						"value": "1"
					}
				}
			],
			"sid": 338961635813567
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 160678380998133,
					"parameters": {
						"variable": "timer",
						"comparison": 0,
						"value": "0"
					}
				}
			],
			"actions": [
				{
					"callFunction": "playerDeath",
					"sid": 549090065624683
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 873136359621032,
					"parameters": {
						"variable": "timer",
						"value": "120"
					}
				}
			],
			"sid": 565360041910491
		},
		{
			"functionName": "playerDeath",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "Player",
					"sid": 677095771039160
				},
				{
					"id": "set-visible",
					"objectClass": "txtGUI",
					"sid": 998948858926978,
					"parameters": {
						"visibility": "visible"
					}
				},
				{
					"id": "set-text",
					"objectClass": "txtGUI",
					"sid": 434018741610020,
					"parameters": {
						"text": "\"Game Over\""
					}
				}
			],
			"sid": 707384373582284
		}
	],
	"sid": 500463198133144
}